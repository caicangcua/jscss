"use strict";window.ComApp=window.ComApp||{};var bullhorn,realDevice=DevExpress.devices.real(),isWinPhone="win"==realDevice.platform&&realDevice.phone,chochut=function(e,n){$(".loader_frm").fadeOut("slow",function(){$(this).css("display","none")}),e>0&&DevExpress.ui.dialog.alert("We cannot load template view now. Please check your internet connection and try later.")};ComApp.Store=window.ComApp.Store||{};var extendApiDB,bkheartbeat,hbua,CacheVersion,serOpts,reqDomain,initview="Menu",hwndDevice="",timestamp="337647087620164299029740",appstate="41e085b4-e7b8-41c4-8e5f-23d81438e91f",_bannedTimer=null,preventBackbutton=!1,logincatcha="",_lechtime=0,memorybag={},eventCallbacks={},__$ncc="",communicateEVT={};function apiHistory(e,n){var t=eventCallbacks[e]||{},i=$.extend(!0,{},n),o=t.log||{};for(var a in i)o[a.toString()]=i[a.toString()];t.log=o}chochut=function(e,n,t){if("0"==e?screenloader_frm.css("display",""):screenloader_frm.fadeOut("slow",function(){screenloader_frm.css("display","none")}),e<0){preventBackbutton=!0,t=t?"<div style='height:150px'><img src='"+gitpath+"images/"+t.img+"' style='display: block;margin: 0 auto;' /></div>"+t.msg:"<div style='height:150px'><img src='"+gitpath+"images/404_init.png' style='display: block;margin: 0 auto;' /></div>"+gbM("404Msg");var i=DevExpress.ui.dialog.custom({message:t,buttons:[{text:gbM("404Close"),visible:isDevice,onClick:function(){return i.hide(),navigator.app.exitApp(),!1}},{text:gbM("404Retry"),onClick:function(){return n}}],showTitle:!1});i.show().done(function(e){preventBackbutton=!1,e&&e()})}};var _$a,_$screenTimer,confirmDlg=function(e,n,t){var i={text:gbM("OK"),onClick:function(){return 1}},o={text:gbM("Yes"),onClick:function(){return 6}},a={text:gbM("No"),onClick:function(){return 7}},r={text:gbM("Cancel"),onClick:function(){return 2}},s=["fa fa-info-circle","blue"],l=[];0==n[0]?l=[i]:1==n[0]?l=[i,r]:4==n[0]?l=[o,a]:3==n[0]&&(l=[o,a,r]),32==n[1]?s=["dx-icon-help","black"]:64==n[1]?s=["dx-icon-info","blue"]:48==n[1]&&(s=["dx-icon-warning","orange"]);var c="<div style='position: relative;max-width:300px'><i class='"+s[0]+"' style='color:"+s[1]+";font-size:30px;padding-right:10px'/><span>"+e+"</span></div>";preventBackbutton=!0,DevExpress.ui.dialog.custom({message:c,buttons:l,showTitle:!1}).show().done(function(e){preventBackbutton=!1,t&&t(e)})},banned=function(e,n){preventBackbutton=!0,screenloader_frm.fadeOut("slow",function(){screenloader_frm.css("display","none")});var t=JSON.parse($("<div>").html(e)[0].textContent),i=DevExpress.ui.dialog.custom({message:"<div style='height:150px'><img src='"+gitpath+"images/banned.png' onload='_bannedTimer.start(this)' style='display: block;margin: 0 auto;' /></div>"+t.msg,buttons:[{text:gbM("404Close"),visible:isDevice,onClick:function(){return i.hide(),navigator.app.exitApp(),!1}},{template:"<div id='bannedTimer'><span class='dx-button-text' id='gio'>00</span>:<span class='dx-button-text' id='phut'>00</span>:<span class='dx-button-text' id='giay'>00</span></div>",onClick:function(){return n}}],showTitle:!1});i.show().done(function(e){preventBackbutton=!1,_bannedTimer&&_bannedTimer.destroy(),e&&e()}),_bannedTimer=new countdown(1e3*parseInt(t.duration)*60,i)},countdown=function(e,n){var t,i,o,a,r,s=(new Date).getTime()+e;if(!isNaN(s))return this.start=function(e){r=$(e).closest(".dx-popup-content.dx-dialog-content").next().find("#bannedTimer"),a=setInterval(l,1e3)},this.destroy=function(){clearInterval(a)},{destroy:this.destroy,start:this.start,get_time:0};function l(){var e=new Date;e=e.getTime();var n=parseInt((s-e)/1e3);if(n>=0)parseInt(n/86400),n%=86400,t=parseInt(n/3600),n%=3600,i=parseInt(n/60),n%=60,o=parseInt(n),r.find("#gio").text(("0"+t).slice(-2)),r.find("#phut").text(("0"+i).slice(-2)),r.find("#giay").text(("0"+o).slice(-2));else{clearInterval(a);var l=r.closest(".dx-button")[0];l&&l.click()}}},_$tmpver="0",scrLocked=function(e){clearTimeout(_$screenTimer),screenloader_frm.css("display",""),_$screenTimer=setTimeout(function(){scrReleased(),DevExpress.ui.notify("Released screen timeout!","warning",1e3)},e||5e3)},scrReleased=function(){clearTimeout(_$screenTimer),screenloader_frm.fadeOut("fast",function(){screenloader_frm.css("display","none")})},_isDeviceReady=$.Deferred(),_globalReady=$.Deferred(),_onDeviceReady=$.Deferred(),isDevice=!1,releaseVer=!/http:\/\/localhost/.test(window.location.href),notyFunc=function(e,n){$.parseJSON($("<div/>").html(e).text());n!=_$tmpver&&DevExpress.ui.notify({message:gbM("S0_000"),onHiding:function(){window.location.reload()},width:200,position:{my:"center",at:"center"}},"info",2e3),console.log(timestamp)};function _templateMapCHK(e){var n={};return ComApp.app.viewEngine._templateMap.hasOwnProperty(e)||(n.nextview=e,scrLocked()),n}function globalCHK(e){return function(){var n=e.validator._$element;n.addClass("loader2");var t=function(e,t,i){e.rule.isValid=t,e.rule.message=i,e.validator.validate(),n.removeClass("loader2"),_$q.next(!1)};_$q.add(function(){_$a.api(e.$m,e.$a,e.$s,function(n){var i="0"!=n.isValid;t(e,i,gbM(n.Msg))},function(n){t(e,!1,n.description)})})}(),!0}function appStarting(e,n){var t=function(){$.when(_globalReady).done(function(e){ComApp.app.router.register(":view/:id",{view:initview,id:void 0}),_$a=ComApp.Warehouse.srcv.Utils,ComApp.app.navigate(),DevExpress.devices.on("orientationChanged",function(e){ComApp.app.maCurrentView._orientationChanged&&ComApp.app.maCurrentView._orientationChanged(e)})})};if(n){var i=ComApp.app.viewEngine;"1"==e?i._loadTemplatesFromString($("<div>").html(n)[0].textContent):i._loadTemplatesFromString(n),t()}else ComApp.app.loadTemplates(ComApp.srcv.dxView._url).done(function(){t()}).fail(function(e){t()})}$(function(){""==(_$tmpver=localDB.exe("get","tmpver",null,0))&&(_$tmpver="0"),DevExpress.devices.current({platform:"generic"}),ComApp.app=new DevExpress.framework.html.HtmlApplication({namespace:ComApp.Store,commandMapping:ComApp.config.commandMapping,layoutSet:DevExpress.framework.html.layoutSets[ComApp.config.layoutSet],animationSet:DevExpress.framework.html.animationSets[ComApp.config.animationSet],navigation:ComApp.config.navigation,templatesVersion:"ComApp.Store-15.2.5"}),ComApp.app.on("navigatingBack",function(e){ComApp.app.canBack()?bullhorn._$element.css({left:"5px",opacity:"0.5"}):e.cancel=!0}),document.addEventListener("deviceready",function(){},!1),!window.cordova&&window.WinJS&&Windows.Phone&&Windows.Phone.UI.Input.HardwareButtons.addEventListener("backpressed",function(e){e.handled=!0}),ComApp.app.on("viewShowing",function(e){var n=e.viewInfo.model;e.direction,e.viewInfo.model.name;ComApp.app.maCurrentView=n}).on("viewShown",function(e){bullhorn?bullhorn._$element.css({opacity:"1"}):bullhorn=$("#bullhorn").dxButton({visible:!1,icon:"fa fa-bullhorn",elementAttr:{class:"btnstyle1 bullhorn-event"}}).dxButton("instance"),e.params.unlock&&"T"!=e.params.unlock||scrReleased()}),"vi"==_$locate?$.when($.getJSON(gitpath+"cldr/main/vi/ca-gregorian.json"),$.getJSON(gitpath+"cldr/main/vi/numbers.json"),$.getJSON(gitpath+"cldr/main/vi/currencies.json"),$.getJSON(gitpath+"cldr/supplemental/likelySubtags.json"),$.getJSON(gitpath+"cldr/supplemental/timeData.json"),$.getJSON(gitpath+"cldr/supplemental/weekData.json"),$.getJSON(gitpath+"cldr/supplemental/currencyData.json"),$.getJSON(gitpath+"cldr/supplemental/numberingSystems.json")).then(function(){return[].slice.apply(arguments,[0]).map(function(e){return e[0]})}).then(Globalize.load).then(function(){Globalize.locale(_$locate),_$hieu=MyHandler(window),_globalReady.resolve()}).fail(function(){_globalReady.resolve()}):(_$hieu=MyHandler(window),_globalReady.resolve())});